{"version":3,"file":"index.js","sources":["../src/com/cngr/multivaluemap/index.js"],"sourcesContent":["/*\n * Copyright (c) 2019, Philip A Senger (https://github.com/psenger/multivaluemap/blob/development/LICENSE)\n */\n'use strict'\n\n/**\n * @module multivaluemap\n * @type {MultiValuedMap}\n */\n\nmodule.exports = class MultiValuedMap {\n  /**\n   * Constructor, with optional initial state of iterable.\n   *\n   * @param [iterable] - An Array or other iterable object whose elements are key-value pairs (arrays with two elements, e.g. [[ 1, ['one','two'] ],[ 2, ['three'] ]]). Each key-value pair is added to the new Map; null values are treated as undefined.\n   */\n  constructor(iterable) {\n    this.map = new Map()\n    if (iterable) {\n      if (typeof iterable[Symbol.iterator] !== 'function') {\n        throw new TypeError(`${iterable} is not iterable`)\n      } else {\n        for (const kvp of iterable) {\n          if (typeof (kvp.entries) === 'undefined') {\n            throw new TypeError(`Iterator value a is not an entry object`)\n          }\n          const [key, values] = kvp\n          if (Array.isArray(values)) {\n            values.forEach(value => {\n              this.set(key, value)\n            })\n          } else {\n            this.set(key, values)\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Sets the value for the key in the Map object. Returns the Map object.\n   * @param key\n   * @param value\n   * @returns {module.MultiValuedMap}\n   */\n  set(key, value) {\n    const existingValue = this.map.get(key) || []\n    existingValue.push(value)\n    this.map.set(key, existingValue) // the only reason I need to do this, if the existingValue doesnt exist\n    return this\n  }\n\n  /**\n   * Set All values.\n   * @param key\n   * @param values\n   * @returns {module.MultiValuedMap}\n   */\n  setAll(key, values) {\n    values.forEach(value => {\n      this.set(key, value)\n    })\n    return this\n  }\n\n  /**\n   * Returns the number of key/value pairs in the Multi Value Map object.\n   * @returns {number}\n   */\n  get size() {\n    return this.map.size\n  }\n\n  /**\n   * Returns a boolean asserting whether a value has been associated to the key in the Multi Value Map object or not.\n   * @param key\n   * @returns {boolean}\n   */\n  has(key) {\n    return this.map.has(key)\n  }\n\n  /**\n   * Returns true if an element in the Multi Value Map object existed and has been removed, or false if the element does not exist. It will return false afterwards.\n   * @param {any} key\n   * @returns {boolean}\n   */\n  delete(key) {\n    return this.map.delete(key)\n  }\n\n  /**\n   * Removes all key/value pairs from the Multi Value Map object.\n   */\n  clear() {\n    this.map.clear()\n  }\n\n  /**\n   * Returns a new Iterator object that contains an array of [key, [value]] for each element in the Map object in insertion order.\n   * @returns {IterableIterator<K>}\n   */\n  keys() {\n    return this.map.keys()\n  }\n\n  values() {\n    return this.map.values()\n  }\n\n  entries() {\n    return this.map.entries()\n  }\n\n  get(key) {\n    return this.map.get(key)\n  }\n\n  forEach(callBackFunction, thisArg) {\n    const cb = callBackFunction.bind(thisArg)\n    const self = this\n    this.map.forEach((value, key) => cb(value, key, self), thisArg)\n  }\n\n  [Symbol.iterator]() {\n    const iterator = this.map.keys()\n    const getValue = key => this.map.get(key)\n    return {\n      next() {\n        const { value: key, done } = iterator.next()\n        if (done) {\n          return { value: [], done: true }\n        }\n        return { value: [key, getValue(key)], done: false }\n      }\n    }\n  }\n}\n"],"names":[],"mappings":"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"}